# Десять шагов к устойчивым ответам Колибри на русском языке

1. **Расширить кодировку символов для кириллицы.**
   - Проверить, что `KolibriSymbolTable` содержит устойчивые соответствия для всех букв русского алфавита, включая `ё`, а также пробел и базовую пунктуацию. При необходимости прогнать утилиту, добавляющую недостающие символы в геном.

2. **Обучить базовый словарь приветствий и ответов.**
   - Использовать `scripts/llm_teacher.py` (в режиме HTTP или `torch`) с системной подсказкой «Отвечай на русском языке», чтобы загрузить в память Kolibri стартовые пары `вопрос → ответ` («привет», «как дела», «кто ты», и т.д.).

3. **Автоматизировать ретрансляцию знаний.**
   - Настроить периодический запуск `build/kolibri_knowledge_relay --target-key-inline build/cluster/swarm.key`, чтобы новые русскоязычные teach/feedback события попадали в геномы всех узлов без задержек.

4. **Запустить интенсивную эволюцию формул.**
   - На активных узлах выполнить серии `:tick 200` и `:good` для новых ассоциаций, чтобы повысить fitness русскоязычных ответов и закрепить их в пуле формул.

5. **Отладить fallback-генерацию.**
   - Протестировать `kolibri_generate_text_from_gene` на кириллическом вводе и убедиться, что после расширения таблицы символов fallback производит читабельные русские слова, а не случайный шум.

6. **Активно использовать n-граммы.**
   - Проверить, что `kolibri_record_ngrams` извлекает биграммы и триграммы из русских фраз. При необходимости увеличить длину n, чтобы захватывать устойчивые конструкции («как дела», «кто такой»).

7. **Настроить режимы ответов под русский язык.**
   - Для режимов «журнал», «эмодзи», «аналитика» задать русские шаблоны форматирования (маркер `•`, корректная пунктуация, эмодзи), чтобы стиль не нарушал язык ответа.

8. **Добавить русские тестовые кейсы.**
   - Создать набор автотестов (например, в `tests/test_public_api.c` и e2e-файлах фронтенда), проверяющих, что запросы «привет», «1+1», «как тебя зовут» возвращают строки с кириллицей.

9. **Контролировать качество через обратную связь.**
   - В веб-интерфейсе активировать автоматическую отправку `feedback=good` для корректных русских ответов и `feedback=bad` при появлении англоязычных или шумовых ответов, чтобы эволюция отсеивала нежелательные варианты.

10. **Собирать и анализировать логи.**
    - Регулярно просматривать `build/cluster/node_*.log` и `kolibri_trace.jsonl`, фиксируя, какие русские запросы всё ещё приводят к fallback. На основе логов добавлять новые teach-примеры и корректировать режимы.

Следуя этим шагам, рой Колибри стабильно переходит на русскоязычную коммуникацию и удерживает её даже при появлении новых узлов и формул.
